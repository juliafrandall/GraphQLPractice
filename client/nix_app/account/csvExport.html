<div class="row">
  <div class="col-md-6 col-lg-6">
    <a href="#" ui-sref="account.cabinet.dashboard" class="btn btn-default btn-sm pull-left btn-back">
      <i class="fa fa-chevron-left"></i>
    </a>
    <h1>
      CSV Export
    </h1>


    <form name="form">
      <div class="form-horizontal">
        <div class="form-group">
          <label class="col-xs-2 col-sm-2 control-label">Type</label>
          <div class="col-xs-10 col-sm-8">
            <div class="input-group">
              <select class="form-control"
                      ng-model="vm.type"
                      ng-options="
                        t.type as t.label for t in
                        [
                          {type: 1, label: 'Export Food Log'},
                          {type: 3, label: 'Export Weight Log'},
                          {type: 4, label: 'Export Exercise Log'},
                          {type: 2, label: 'Export Nutrient Histogram'},
                        ]
                      "
              ></select>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-xs-2 col-sm-2 control-label">Start</label>
          <div class="col-xs-10 col-sm-8">
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default" type="button" ng-click="vm.begin.opened = !vm.begin.opened">
                  <i class="glyphicon glyphicon-calendar"></i>
                </button>
              </span>
              <input type="text" class="form-control"
                     placeholder="{{vm.begin.initialValue | amDateFormat: 'MM/DD/YYYY'}}"
                     datepicker-popup="MM/dd/yyyy"
                     max-date="vm.end.value"
                     ng-model="vm.begin.value"
                     is-open="vm.begin.opened"
                     show-button-bar="false"
                     show-weeks="false"
                     max-mode="'day'">
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-xs-2 col-sm-2 control-label">End</label>
          <div class="col-xs-10 col-sm-8">
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default" type="button" ng-click="vm.end.opened = !vm.end.opened">
                  <i class="glyphicon glyphicon-calendar"></i>
                </button>
              </span>
              <input type="text" class="form-control"
                     placeholder="{{vm.end.initialValue | amDateFormat: 'MM/DD/YYYY'}}"
                     datepicker-popup="MM/dd/yyyy"
                     min-date="vm.begin.value"
                     max-date="vm.end.maxDate"
                     ng-model="vm.end.value"
                     is-open="vm.end.opened"
                     show-button-bar="false"
                     show-weeks="false"
                     max-mode="'day'">
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <a target="_blank"
           ng-href="/nixapi/export/{{({1: 'log', 2: 'histogram', 3: 'weight', 4: 'exercise'})[vm.type]}}?timezone={{vm.user.getTimezone()}}&begin={{vm.begin.value | amDateFormat: 'YYYY-MM-DD'}}&end={{vm.end.value | amDateFormat: 'YYYY-MM-DD'}}"
           class="btn btn-success">Download</a>
      </div>
    </form>


  </div>
</div>

